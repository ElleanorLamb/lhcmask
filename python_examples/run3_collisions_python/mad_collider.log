par_verbose = 1;
ver_lhc_run = 3;
mylhcbeam = 1;
option, -echo,warn, -info;
call, file="optics_runII/2018/toolkit/macro.madx";

    crossing_save: macro = {
    on_x1_aux=on_x1;on_sep1_aux=on_sep1;on_a1_aux=on_a1;on_o1_aux=on_o1;
    on_x2_aux=on_x2;on_sep2_aux=on_sep2;on_a2_aux=on_a2;on_o2_aux=on_o2; on_oe2_aux=on_oe2;
    on_x5_aux=on_x5;on_sep5_aux=on_sep5;on_a5_aux=on_a5;on_o5_aux=on_o5;
    on_x8_aux=on_x8;on_sep8_aux=on_sep8;on_a8_aux=on_a8;on_o8_aux=on_o8;
    on_x2h_aux=on_x2h;
    on_x2v_aux=on_x2v;
    on_sep2h_aux=on_sep2h;
    on_sep2v_aux=on_sep2v;
    on_x8h_aux=on_x8h;
    on_x8v_aux=on_x8v;
    on_sep8h_aux=on_sep8h;
    on_sep8v_aux=on_sep8v;
    on_disp_aux=on_disp;
    on_alice_aux=on_alice;
    on_lhcb_aux=on_lhcb;
    };

    crossing_disable: macro={
    on_x1=0;on_sep1=0;on_a1=0;on_o1=0;
    on_x2=0;on_sep2=0;on_a2=0;on_o2=0;on_oe2=0;
    on_x5=0;on_sep5=0;on_a5=0;on_o5=0;
    on_x8=0;on_sep8=0;on_a8=0;on_o8=0;
    on_x2h=0;
    on_x2v=0;
    on_sep2h=0;
    on_sep2v=0;
    on_x8h=0;
    on_x8v=0;
    on_sep8h=0;
    on_sep8v=0;
    on_disp=0;
    on_alice=0; on_lhcb=0;
    };

    crossing_restore: macro={
    on_x1=on_x1_aux;on_sep1=on_sep1_aux;on_a1=on_a1_aux;on_o1=on_o1_aux;
    on_x2=on_x2_aux;on_sep2=on_sep2_aux;on_a2=on_a2_aux;on_o2=on_o2_aux; on_oe2=on_oe2_aux;
    on_x5=on_x5_aux;on_sep5=on_sep5_aux;on_a5=on_a5_aux;on_o5=on_o5_aux;
    on_x8=on_x8_aux;on_sep8=on_sep8_aux;on_a8=on_a8_aux;on_o8=on_o8_aux;
    on_x2h=on_x2h_aux;
    on_x2v=on_x2v_aux;
    on_sep2h=on_sep2h_aux;
    on_sep2v=on_sep2v_aux;
    on_x8h=on_x8h_aux;
    on_x8v=on_x8v_aux;
    on_sep8h=on_sep8h_aux;
    on_sep8v=on_sep8v_aux;
    on_disp=on_disp_aux;
    on_alice=on_alice_aux; on_lhcb=on_lhcb_aux;
    };
    ;
call, file="tools/optics_indep_macros.madx";
call, file="optics_runII/2018/lhc_as-built.seq";
call, file="optics_runIII/RunIII_dev/IR7-Run3seqedit.madx";
slicefactor=8;
call, file="optics_runII/2018/toolkit/myslice.madx";
beam;
use, sequence=lhcb1; makethin,sequence=lhcb1, style=teapot, makedipedge=true;
use, sequence=lhcb2; makethin,sequence=lhcb2, style=teapot, makedipedge=true;
